<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME405 Polar Plotter: ME405</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME405 Polar Plotter
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ME405 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><em>This site contains documentation for the polar plotter project done in ME 405 Mechatronics by Ruodolf Rumbaoa and Barret Osborne.</em> <br  />
<br  />
Source Folder: [<a href="https://github.com/Mecha12RumbaoaOsborne/ME405-TERM-PROJECT">https://github.com/Mecha12RumbaoaOsborne/ME405-TERM-PROJECT</a>] <br  />
<br  />
</p>
<h2><a class="anchor" id="autotoc_md0"></a>
More Details:</h2>
<p ><a class="el" href="mainroutine.html">Main Routine</a> <br  />
<a class="el" href="driver.html">Driver Class</a> <br  />
</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Overview</h2>
<p >This repository contains the project files, source code, and other documents produced as part of the Polar Plotter project conducted by Ruodolf Rumbaoa and Barret Osborne. This project was done as part of the ME405 Mechatronics class for Cal Poly San Luis Obispo. The code included in this repository is ran on a NucleoL476RG that interfaces with two TMC4210 and two TMC2208 stepper drivers to control two 4-wire NEMA 17 stepper motors. The baord also interfaces with a DC motor to control pen up/pen down functionality. <br  />
</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Demonstration</h2>
<p >Here is a demonstration video of the Polar Plotter: <br  />
 
<iframe src="https://player.vimeo.com/video/718926551?h=7e8764d82d&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" width="1280" height="720" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen title="ME 405 project demo"></iframe> <br  />
<br  />
</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Mechanical Design</h2>
<p >One of the NEMA 17 steppers mount on a 3D printed structure that is mounted on a white board and a piece of 3/4 plywood. This stepper is used to drvie the revolute motion of the plotter arm. The second stepper is used to drive the translation along the plotter's arm using a belt and pulley system. The pen and DC motor are mounted on the arm and translates when the belt is driven by the second stepper motor. The arm sits on a lazy susan bearing. A wheel is also connected to the end of the arm to provide additional support. <br  />
</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Stepper Drivers</h2>
<p >The TMC4210 driver class file is used to control the position or velocity of the steppers and can be used for different functions like, enable/disable, position/velocity reading, taget position/velocity setting, zeroing, and homing. The main routine uses a shceduler provided by the instructor of the class to run the tasks necessary to interpret an hpgl file stored in board memory and draw it on a white board. Inkscape was used to generate an hpgl file from desired image files. When the main routine is ran, the plotter waits for a button input to begin using the scheduler to parse the hpgl files for instructions and coordinates which are then sent to the steppers as integer theta inputs. The plotter then draws the image point by point until it finishes. Finally, when the drawing is finished the motors home to their original states. The driver class was designed accordingly to include those methods and the attributes necessary to implement those methods like several timer and pin objects. <br  />
</p><div class="image">
<img src="ClassDiagram.jpg" alt="" width="500px" height="600px"/>
</div>
 <center>Figure 1. Driver class design.</center><p> <br  />
</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Modeling</h2>
<p >The kinematics modeling of the plotter was that of a 2DOF link that rotates about a fixed point. The end effector translates along the arm: <br  />
</p><div class="image">
<img src="Kinematics1.jpg" alt="" width="600px" height="700px"/>
</div>
 <div class="image">
<img src="Kinematics2.jpg" alt="" width="600px" height="700px"/>
</div>
 <center>Figure 2. Polar plotter kinematic model and position/jacobian equations.</center><p> <br  />
Using NewtonRaphson equation above, we set developed functions to iteratively solve for motor angles based on desired xy coordinates. Here is a code snippet of those fucntions: <br  />
</p><div class="image">
<img src="newtonraphsonsnippet.png" alt=""/>
</div>
 <center>Figure 3. NewtonRaphson implementation code snippet.</center><p> <br  />
</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Future Improvements</h2>
<p >One unsolved issue so far has been the slight tilted outcome of the drawings. This was most likeley due to an improper conversion factor from the radius of the belt drive to distance draveled per rotation of the stepper on the robot arm. This inaccuracy caused the drawings to have streched coordintaes the farther the end effector traveled along the arm. Through more accurate measurements and calibration this issue might be solved although we didn't have enough time to. </p><dl class="section author"><dt>Author</dt><dd>Barrett Osborne </dd>
<dd>
Ruodolf Rumbaoa </dd></dl>
<dl class="section date"><dt>Date</dt><dd>06/09/2022 <br  />
<br  />
</dd></dl>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
